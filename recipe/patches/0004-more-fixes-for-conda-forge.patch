From bf90f439e820a74a55afc98cc521b6a025b599cc Mon Sep 17 00:00:00 2001
From: epwalsh <epwalsh10@gmail.com>
Date: Mon, 7 Feb 2022 16:43:22 -0800
Subject: [PATCH 4/4] more fixes for conda-forge

---
 requirements.txt                       | 2 +-
 tests/integrations/torch/train_test.py | 6 ++++++
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/requirements.txt b/requirements.txt
index 4c09daf..1c13d6b 100644
--- a/requirements.txt
+++ b/requirements.txt
@@ -24,7 +24,7 @@ petname>=2.6,<3.0
 # that you install with 'pip install tango[torch]'.
 torch>=1.9,<1.11             # needed by: torch,pytorch_lightning
 numpy                        # needed by: torch
-datasets>=1.12,<2            # needed by: datasets
+datasets>=1.12,<2            # needed by: datasets,transformers
 wandb>=0.12,<0.13            # needed by: wandb
 pytorch-lightning>=1.5,<1.6  # needed by: pytorch_lightning
 transformers>=4.12.3         # needed by: transformers
diff --git a/tests/integrations/torch/train_test.py b/tests/integrations/torch/train_test.py
index 4f7c5ee..cfd279e 100644
--- a/tests/integrations/torch/train_test.py
+++ b/tests/integrations/torch/train_test.py
@@ -3,14 +3,20 @@ import json
 import pytest
 import torch.distributed as dist
 
+from tango.common.logging import initialize_logging, teardown_logging
 from tango.common.testing import TangoTestCase
 
 
 class TestTrainStep(TangoTestCase):
+    def setup_method(self):
+        super().setup_method()
+        initialize_logging(enable_click_logs=True)
+
     def teardown_method(self):
         super().teardown_method()
         if dist.is_initialized():
             dist.destroy_process_group()
+        teardown_logging()
 
     @pytest.mark.parametrize("with_validation", [True, False])
     def test_basic_train(self, with_validation: bool):
-- 
2.32.0.windows.2

